import base64
exec(base64.b64decode('aW1wb3J0IGFzeW5jaW8KaW1wb3J0IG9zCmZyb20gdGVsZWdyYW0gaW1wb3J0IFVwZGF0ZQpmcm9tIHRlbGVncmFtLmV4dCBpbXBvcnQgKAogICAgQXBwbGljYXRpb24sCiAgICBNZXNzYWdlSGFuZGxlciwKICAgIE1lc3NhZ2VSZWFjdGlvbkhhbmRsZXIsCiAgICBDb21tYW5kSGFuZGxlciwKICAgIENvbnRleHRUeXBlcywKICAgIGZpbHRlcnMsCikKCiMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiMgQ09ORklHCiMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgpUT0tFTiA9IG9zLmdldGVudigiQk9UX1RPS0VOIikgb3IgInRva2VucHJ1ZWJhcyIKCiMgSURzIGRlIGFkbWlucwpQUklNQVJZX0FETUlOX0lEID0gNTkyNTUyOTE2ICAgICAgICAgICMgdHUgY3VlbnRhIHByaW5jaXBhbApTRUNPTkRfQURNSU5fSUQgPSAxOTk3ODUyNzczICAgICAgICAgICMgdHUgb3RyYSBjdWVudGEKCkFETUlOX0lEUyA9IHtQUklNQVJZX0FETUlOX0lELCBTRUNPTkRfQURNSU5fSUR9CgojIE1hcGE6IChjaGF0X2lkX2FkbWluLCBtZXNzYWdlX2lkX3JlZW52aWFkbykgLT4gdXNlcl9pZF9vcmlnaW5hbApsaW5rID0ge30KCiMgTWFwYSByZXNwdWVzdGFzIGFkbWluOiAoY2hhdF9pZF9vcmlnZW4sIG1zZ19pZF9vcmlnZW4pIC0+IFsoY2hhdF9kZXN0LCBtc2dfaWRfZGVzdCksIC4uLl0KIyAodXN1YXJpbyArIG90cm9zIGFkbWlucykKc2VudF9saW5rID0ge30KCnByaW50KCJCT1QgQ0FSR0FORE8uLi4iKQoKIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KIyAvc3RhcnQgLSBtZW5zYWplIGRlIGJpZW52ZW5pZGEKIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KYXN5bmMgZGVmIHN0YXJ0X2NtZCh1cGRhdGU6IFVwZGF0ZSwgY29udGV4dDogQ29udGV4dFR5cGVzLkRFRkFVTFRfVFlQRSk6CiAgICBhd2FpdCB1cGRhdGUubWVzc2FnZS5yZXBseV90ZXh0KAogICAgICAgICLwn5GLIEhvbGEgRXNjcsOtYmVtZSBjdWFscXVpZXIgZHVkYSBhcXXDrSBlbiBlc3RlIGNoYXQsIHByb2JsZW1hcywgZXRjLiBzb2JyZSBsb3MgTU9EUy5cblxuIgogICAgICAgICLwn5GLIEhpIFdyaXRlIG1lIGFueSBxdWVzdGlvbnMgaGVyZSBpbiB0aGlzIGNoYXQsIHByb2JsZW1zLCBldGMuIGFib3V0IE1PRFMuIgogICAgKQoKIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KIyBNZW5zYWplIGRlbCB1c3VhcmlvIOKGkiByZWVudmlhciBhIGFkbWlucyArIHJlYWNjacOzbiB0ZW1wb3JhbAojIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQphc3luYyBkZWYgcmVjaWJpcl91c3VhcmlvKHVwZGF0ZTogVXBkYXRlLCBjb250ZXh0OiBDb250ZXh0VHlwZXMuREVGQVVMVF9UWVBFKToKICAgIG1zZyA9IHVwZGF0ZS5tZXNzYWdlCiAgICBpZiBtc2cgaXMgTm9uZToKICAgICAgICByZXR1cm4KCiAgICB1c2VyID0gdXBkYXRlLmVmZmVjdGl2ZV91c2VyCiAgICB1c2VyX2lkID0gdXNlci5pZAogICAgdXNlcl9jaGF0X2lkID0gbXNnLmNoYXRfaWQKCiAgICAjIE5vIHJlZW52aWFyIHNpIHF1aWVuIGVzY3JpYmUgZXMgdW4gYWRtaW4KICAgIGlmIHVzZXJfaWQgaW4gQURNSU5fSURTOgogICAgICAgIHJldHVybgoKICAgICMgUmVlbnZpYXIgZWwgbWVuc2FqZSBhIGNhZGEgYWRtaW4KICAgIGZvciBhZG1pbl9jaGF0X2lkIGluIEFETUlOX0lEUzoKICAgICAgICByZWVudmlhZG8gPSBhd2FpdCBjb250ZXh0LmJvdC5mb3J3YXJkX21lc3NhZ2UoCiAgICAgICAgICAgIGNoYXRfaWQ9YWRtaW5fY2hhdF9pZCwKICAgICAgICAgICAgZnJvbV9jaGF0X2lkPXVzZXJfY2hhdF9pZCwKICAgICAgICAgICAgbWVzc2FnZV9pZD1tc2cubWVzc2FnZV9pZAogICAgICAgICkKICAgICAgICBsaW5rWyhhZG1pbl9jaGF0X2lkLCByZWVudmlhZG8ubWVzc2FnZV9pZCldID0gdXNlcl9pZAoKICAgICMg8J+SrCBSZWFjY2nDs24gdGVtcG9yYWwgKDJzKSBhbCBtZW5zYWplIGRlbCB1c3VhcmlvCiAgICB0cnk6CiAgICAgICAgYXdhaXQgY29udGV4dC5ib3QuX3Bvc3QoCiAgICAgICAgICAgICJzZXRNZXNzYWdlUmVhY3Rpb24iLAogICAgICAgICAgICBkYXRhPXsKICAgICAgICAgICAgICAgICJjaGF0X2lkIjogbXNnLmNoYXRfaWQsCiAgICAgICAgICAgICAgICAibWVzc2FnZV9pZCI6IG1zZy5tZXNzYWdlX2lkLAogICAgICAgICAgICAgICAgInJlYWN0aW9uIjogW3sidHlwZSI6ICJlbW9qaSIsICJlbW9qaSI6ICLwn5GNIn1dCiAgICAgICAgICAgIH0KICAgICAgICApCiAgICAgICAgYXdhaXQgYXN5bmNpby5zbGVlcCgyKQogICAgICAgIGF3YWl0IGNvbnRleHQuYm90Ll9wb3N0KAogICAgICAgICAgICAic2V0TWVzc2FnZVJlYWN0aW9uIiwKICAgICAgICAgICAgZGF0YT17CiAgICAgICAgICAgICAgICAiY2hhdF9pZCI6IG1zZy5jaGF0X2lkLAogICAgICAgICAgICAgICAgIm1lc3NhZ2VfaWQiOiBtc2cubWVzc2FnZV9pZCwKICAgICAgICAgICAgICAgICJyZWFjdGlvbiI6IFtdCiAgICAgICAgICAgIH0KICAgICAgICApCiAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgcHJpbnQoIkVycm9yIHJlYWNjacOzbiB0ZW1wb3JhbCB1c3VhcmlvOiIsIGUpCgojIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQojIEFkbWluIHJlc3BvbmRlIOKGkiBlbnZpYXIgbWVuc2FqZS9tZWRpbyBhbCB1c3VhcmlvICsgY29waWFyIGEgb3Ryb3MgYWRtaW5zCiMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCmFzeW5jIGRlZiBhZG1pbl9yZXNwdWVzdGEodXBkYXRlOiBVcGRhdGUsIGNvbnRleHQ6IENvbnRleHRUeXBlcy5ERUZBVUxUX1RZUEUpOgogICAgbXNnID0gdXBkYXRlLm1lc3NhZ2UKICAgIGlmIG1zZyBpcyBOb25lOgogICAgICAgIHJldHVybgoKICAgIHVzZXJfaWQgPSB1cGRhdGUuZWZmZWN0aXZlX3VzZXIuaWQKCiAgICAjIFNpIE5PIGVzIGFkbWluLCB0cmF0YXIgY29tbyB1c3VhcmlvIG5vcm1hbAogICAgaWYgdXNlcl9pZCBub3QgaW4gQURNSU5fSURTOgogICAgICAgIHJldHVybiBhd2FpdCByZWNpYmlyX3VzdWFyaW8odXBkYXRlLCBjb250ZXh0KQoKICAgICMgRGViZSBzZXIgcmVzcHVlc3RhIGEgdW4gbWVuc2FqZSByZWVudmlhZG8KICAgIGlmIG1zZy5yZXBseV90b19tZXNzYWdlIGlzIE5vbmU6CiAgICAgICAgcmV0dXJuCgogICAgYWRtaW5fY2hhdF9pZCA9IG1zZy5jaGF0X2lkCiAgICByZXBseV9tc2dfaWQgPSBtc2cucmVwbHlfdG9fbWVzc2FnZS5tZXNzYWdlX2lkCgogICAgY2xhdmUgPSAoYWRtaW5fY2hhdF9pZCwgcmVwbHlfbXNnX2lkKQogICAgaWYgY2xhdmUgbm90IGluIGxpbms6CiAgICAgICAgcmV0dXJuCgogICAgZGVzdGluYXRhcmlvID0gbGlua1tjbGF2ZV0KCiAgICBkZXN0aW5vcyA9IFtdCgogICAgIyAxKSBFbnZpYXIgYWwgdXN1YXJpbwogICAgZW52aWFkb191c2VyID0gYXdhaXQgY29udGV4dC5ib3QuY29weV9tZXNzYWdlKAogICAgICAgIGNoYXRfaWQ9ZGVzdGluYXRhcmlvLAogICAgICAgIGZyb21fY2hhdF9pZD1hZG1pbl9jaGF0X2lkLAogICAgICAgIG1lc3NhZ2VfaWQ9bXNnLm1lc3NhZ2VfaWQKICAgICkKICAgIGRlc3Rpbm9zLmFwcGVuZCgoZGVzdGluYXRhcmlvLCBlbnZpYWRvX3VzZXIubWVzc2FnZV9pZCkpCgogICAgIyAyKSBDb3BpYXIgbGEgbWlzbWEgcmVzcHVlc3RhIGEgbG9zIE9UUk9TIGFkbWlucwogICAgZm9yIG90aGVyX2FkbWluIGluIEFETUlOX0lEUzoKICAgICAgICBpZiBvdGhlcl9hZG1pbiA9PSBhZG1pbl9jaGF0X2lkOgogICAgICAgICAgICBjb250aW51ZQogICAgICAgIGVudmlhZG9fYWRtaW4gPSBhd2FpdCBjb250ZXh0LmJvdC5jb3B5X21lc3NhZ2UoCiAgICAgICAgICAgIGNoYXRfaWQ9b3RoZXJfYWRtaW4sCiAgICAgICAgICAgIGZyb21fY2hhdF9pZD1hZG1pbl9jaGF0X2lkLAogICAgICAgICAgICBtZXNzYWdlX2lkPW1zZy5tZXNzYWdlX2lkCiAgICAgICAgKQogICAgICAgIGRlc3Rpbm9zLmFwcGVuZCgob3RoZXJfYWRtaW4sIGVudmlhZG9fYWRtaW4ubWVzc2FnZV9pZCkpCgogICAgIyBHdWFyZGFyIHRvZGFzIGxhcyBjb3BpYXMgbGlnYWRhcyBhbCBtZW5zYWplIG9yaWdpbmFsIGRlbCBhZG1pbgogICAgc2VudF9saW5rWyhhZG1pbl9jaGF0X2lkLCBtc2cubWVzc2FnZV9pZCldID0gZGVzdGlub3MKICAgICMgUGVybWl0aXIgdGFtYmnDqW4gZWRpdGFyIGRlc2RlIGxhcyBjb3BpYXMKICAgIGZvciBjaGF0X2Rlc3QsIG1zZ19kZXN0IGluIGRlc3Rpbm9zOgogICAgICAgIHNlbnRfbGlua1soY2hhdF9kZXN0LCBtc2dfZGVzdCldID0gZGVzdGlub3MKCiAgICAjIPCfkqwgUmVhY2Npw7NuIHRlbXBvcmFsIGFsIG1lbnNhamUgZGVsIGFkbWluICgycykKICAgIHRyeToKICAgICAgICBhd2FpdCBjb250ZXh0LmJvdC5fcG9zdCgKICAgICAgICAgICAgInNldE1lc3NhZ2VSZWFjdGlvbiIsCiAgICAgICAgICAgIGRhdGE9ewogICAgICAgICAgICAgICAgImNoYXRfaWQiOiBhZG1pbl9jaGF0X2lkLAogICAgICAgICAgICAgICAgIm1lc3NhZ2VfaWQiOiBtc2cubWVzc2FnZV9pZCwKICAgICAgICAgICAgICAgICJyZWFjdGlvbiI6IFt7InR5cGUiOiAiZW1vamkiLCAiZW1vamkiOiAi8J+RjSJ9XQogICAgICAgICAgICB9CiAgICAgICAgKQogICAgICAgIGF3YWl0IGFzeW5jaW8uc2xlZXAoMikKICAgICAgICBhd2FpdCBjb250ZXh0LmJvdC5fcG9zdCgKICAgICAgICAgICAgInNldE1lc3NhZ2VSZWFjdGlvbiIsCiAgICAgICAgICAgIGRhdGE9ewogICAgICAgICAgICAgICAgImNoYXRfaWQiOiBhZG1pbl9jaGF0X2lkLAogICAgICAgICAgICAgICAgIm1lc3NhZ2VfaWQiOiBtc2cubWVzc2FnZV9pZCwKICAgICAgICAgICAgICAgICJyZWFjdGlvbiI6IFtdCiAgICAgICAgICAgIH0KICAgICAgICApCiAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgcHJpbnQoIkVycm9yIHJlYWNjacOzbiB0ZW1wb3JhbCBhZG1pbjoiLCBlKQoKIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KIyBBZG1pbiByZWFjY2lvbmEgYSB1biBtZW5zYWplIHJlZW52aWFkbwojIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQphc3luYyBkZWYgYWRtaW5fcmVhY2Npb24odXBkYXRlOiBVcGRhdGUsIGNvbnRleHQ6IENvbnRleHRUeXBlcy5ERUZBVUxUX1RZUEUpOgogICAgbXNnID0gdXBkYXRlLm1lc3NhZ2UKICAgIGlmIG1zZyBpcyBOb25lOgogICAgICAgIHJldHVybgoKICAgIHVzZXJfaWQgPSB1cGRhdGUuZWZmZWN0aXZlX3VzZXIuaWQKCiAgICAjIFNvbG8gYWRtaW5zCiAgICBpZiB1c2VyX2lkIG5vdCBpbiBBRE1JTl9JRFM6CiAgICAgICAgcmV0dXJuCgogICAgYWRtaW5fY2hhdF9pZCA9IG1zZy5jaGF0X2lkCiAgICBtc2dfaWQgPSBtc2cubWVzc2FnZV9pZAogICAgY2xhdmUgPSAoYWRtaW5fY2hhdF9pZCwgbXNnX2lkKQoKICAgIGlmIGNsYXZlIG5vdCBpbiBsaW5rOgogICAgICAgIHJldHVybgoKICAgIGRlc3RpbmF0YXJpbyA9IGxpbmtbY2xhdmVdCiAgICBpZiBub3QgbXNnLnJlYWN0aW9uczoKICAgICAgICByZXR1cm4KCiAgICByZWFjdGlvbiA9IG1zZy5yZWFjdGlvbnNbMF0uZW1vamkKCiAgICByZXNwdWVzdGFzID0gewogICAgICAgICLwn5GNIjogIuKcjO+4jyDCoVBlcmZlY3RvISIsCiAgICAgICAgIuKdpO+4jyI6ICLinaTvuI8gwqFHcmFjaWFzIHBvciB0dSBtZW5zYWplISIsCiAgICAgICAgIvCfmIIiOiAi8J+YgiBqYWphamEhIiwKICAgICAgICAi4p2XIjogIuKdlyBFbiB1biBtb21lbnRvIHRlIHJlc3BvbmRvLiIsCiAgICAgICAgIuKdkyI6ICLinZMgwr9Qb2Ryw61hcyBleHBsaWNhciB1biBwb2NvIG3DoXM/IgogICAgfQoKICAgIHRleHRvID0gcmVzcHVlc3Rhcy5nZXQocmVhY3Rpb24sIGYiUmVhY2Npw7NuOiB7cmVhY3Rpb259IikKICAgIGF3YWl0IGNvbnRleHQuYm90LnNlbmRfbWVzc2FnZShjaGF0X2lkPWRlc3RpbmF0YXJpbywgdGV4dD10ZXh0bykKCiMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiMgRWRpY2nDs24gZGUgbWVuc2FqZXMgKHVzdWFyaW8gbyBhZG1pbnMpCiMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCmFzeW5jIGRlZiBoYW5kbGVfZWRpdCh1cGRhdGU6IFVwZGF0ZSwgY29udGV4dDogQ29udGV4dFR5cGVzLkRFRkFVTFRfVFlQRSk6CiAgICBlZGl0ZWQgPSB1cGRhdGUuZWRpdGVkX21lc3NhZ2UKICAgIGlmIGVkaXRlZCBpcyBOb25lOgogICAgICAgIHJldHVybgoKICAgIGVkaXRvcl9pZCA9IGVkaXRlZC5mcm9tX3VzZXIuaWQKCiAgICBpZiBlZGl0b3JfaWQgaW4gQURNSU5fSURTOgogICAgICAgICMgQWRtaW4gZWRpdGEg4oaSIHNpbmNyb25pemFyIHJlc3B1ZXN0YSArIHJlYWNjacOzbgogICAgICAgIGF3YWl0IGhhbmRsZV9hZG1pbl9lZGl0KGVkaXRlZCwgY29udGV4dCkKICAgIGVsc2U6CiAgICAgICAgIyBVc3VhcmlvIGVkaXRhIOKGkiByZWVudmlhciBlZGl0YWRvIGNvbW8gbWVuc2FqZSBudWV2byBhIGFkbWlucyArIHJlYWNjacOzbgogICAgICAgIGF3YWl0IGhhbmRsZV91c2VyX2VkaXQoZWRpdGVkLCBjb250ZXh0KQoKIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KIyBBZG1pbiBlZGl0YSBzdSBtZW5zYWplIOKGkiBlZGl0YXIgY29waWFzICh0ZXh0bykgbyByZWVtcGxhemFyIG1lZGlhL2FyY2hpdm8KIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KYXN5bmMgZGVmIGhhbmRsZV9hZG1pbl9lZGl0KGVkaXRlZCwgY29udGV4dDogQ29udGV4dFR5cGVzLkRFRkFVTFRfVFlQRSk6CiAgICBvcmlnZW5fY2hhdCA9IGVkaXRlZC5jaGF0X2lkCiAgICBvcmlnZW5fbXNnX2lkID0gZWRpdGVkLm1lc3NhZ2VfaWQKICAgIGNsYXZlID0gKG9yaWdlbl9jaGF0LCBvcmlnZW5fbXNnX2lkKQoKICAgIGlmIGNsYXZlIG5vdCBpbiBzZW50X2xpbms6CiAgICAgICAgcmV0dXJuCgogICAgZGVzdGlub3MgPSBzZW50X2xpbmtbY2xhdmVdCgogICAgIyDwn5KsIFJlYWNjacOzbiB0ZW1wb3JhbCAoMnMpIGFsIG1lbnNhamUgZWRpdGFkbyBkZWwgYWRtaW4KICAgIHRyeToKICAgICAgICBhd2FpdCBjb250ZXh0LmJvdC5fcG9zdCgKICAgICAgICAgICAgInNldE1lc3NhZ2VSZWFjdGlvbiIsCiAgICAgICAgICAgIGRhdGE9ewogICAgICAgICAgICAgICAgImNoYXRfaWQiOiBvcmlnZW5fY2hhdCwKICAgICAgICAgICAgICAgICJtZXNzYWdlX2lkIjogb3JpZ2VuX21zZ19pZCwKICAgICAgICAgICAgICAgICJyZWFjdGlvbiI6IFt7InR5cGUiOiAiZW1vamkiLCAiZW1vamkiOiAi8J+RjSJ9XQogICAgICAgICAgICB9CiAgICAgICAgKQogICAgICAgIGF3YWl0IGFzeW5jaW8uc2xlZXAoMikKICAgICAgICBhd2FpdCBjb250ZXh0LmJvdC5fcG9zdCgKICAgICAgICAgICAgInNldE1lc3NhZ2VSZWFjdGlvbiIsCiAgICAgICAgICAgIGRhdGE9ewogICAgICAgICAgICAgICAgImNoYXRfaWQiOiBvcmlnZW5fY2hhdCwKICAgICAgICAgICAgICAgICJtZXNzYWdlX2lkIjogb3JpZ2VuX21zZ19pZCwKICAgICAgICAgICAgICAgICJyZWFjdGlvbiI6IFtdCiAgICAgICAgICAgIH0KICAgICAgICApCiAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgcHJpbnQoIkVycm9yIHJlYWNjacOzbiB0ZW1wb3JhbCBlZGljacOzbiBhZG1pbjoiLCBlKQoKICAgICMgRGV0ZWN0YXIgc2kgZWwgbWVuc2FqZSB0aWVuZSBtZWRpYS9hcmNoaXZvCiAgICBoYXNfbWVkaWEgPSBhbnkoWwogICAgICAgIGVkaXRlZC5waG90bywKICAgICAgICBlZGl0ZWQudmlkZW8sCiAgICAgICAgZWRpdGVkLmRvY3VtZW50LAogICAgICAgIGVkaXRlZC5hdWRpbywKICAgICAgICBlZGl0ZWQuYW5pbWF0aW9uLAogICAgICAgIGVkaXRlZC52b2ljZSwKICAgICAgICBlZGl0ZWQudmlkZW9fbm90ZSwKICAgICAgICBlZGl0ZWQuc3RpY2tlciwKICAgIF0pCgogICAgIyBDYXNvIDE6IHNvbG8gdGV4dG8gKHNpbiBtZWRpYSkg4oaSIGVkaXRhciB0ZXh0byBlbiBsYXMgY29waWFzCiAgICBpZiBub3QgaGFzX21lZGlhIGFuZCBlZGl0ZWQudGV4dCBpcyBub3QgTm9uZToKICAgICAgICBmb3IgZGVzdF9jaGF0X2lkLCBkZXN0X21zZ19pZCBpbiBkZXN0aW5vczoKICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgYXdhaXQgY29udGV4dC5ib3QuZWRpdF9tZXNzYWdlX3RleHQoCiAgICAgICAgICAgICAgICAgICAgY2hhdF9pZD1kZXN0X2NoYXRfaWQsCiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZV9pZD1kZXN0X21zZ19pZCwKICAgICAgICAgICAgICAgICAgICB0ZXh0PWVkaXRlZC50ZXh0CiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICAgICAgICAgIHByaW50KGYiRXJyb3IgYWwgZWRpdGFyIHRleHRvIGVuIHtkZXN0X2NoYXRfaWR9OntkZXN0X21zZ19pZH0gLT4iLCBlKQogICAgICAgIHJldHVybgoKICAgICMgQ2FzbyAyOiBoYXkgbWVkaWEvYXJjaGl2byDihpIgYm9ycmFyIGNvcGlhcyB5IHJlY3JlYXJsYXMKICAgIG5ld19kZXN0aW5vcyA9IFtdCgogICAgZm9yIGRlc3RfY2hhdF9pZCwgZGVzdF9tc2dfaWQgaW4gZGVzdGlub3M6CiAgICAgICAgdHJ5OgogICAgICAgICAgICAjIGJvcnJhciBhbnRpZ3VvCiAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgIGF3YWl0IGNvbnRleHQuYm90LmRlbGV0ZV9tZXNzYWdlKGNoYXRfaWQ9ZGVzdF9jaGF0X2lkLCBtZXNzYWdlX2lkPWRlc3RfbXNnX2lkKQogICAgICAgICAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgICAgICAgICBwcmludChmIk5vIHNlIHB1ZG8gYm9ycmFyIHtkZXN0X2NoYXRfaWR9OntkZXN0X21zZ19pZH0gLT4iLCBlKQoKICAgICAgICAgICAgIyBjb3BpYXIgZWwgbWVuc2FqZSBlZGl0YWRvIChjb24gZWwgbnVldm8gYXJjaGl2by9tZWRpYSkKICAgICAgICAgICAgbnVldm8gPSBhd2FpdCBjb250ZXh0LmJvdC5jb3B5X21lc3NhZ2UoCiAgICAgICAgICAgICAgICBjaGF0X2lkPWRlc3RfY2hhdF9pZCwKICAgICAgICAgICAgICAgIGZyb21fY2hhdF9pZD1vcmlnZW5fY2hhdCwKICAgICAgICAgICAgICAgIG1lc3NhZ2VfaWQ9ZWRpdGVkLm1lc3NhZ2VfaWQKICAgICAgICAgICAgKQogICAgICAgICAgICBuZXdfZGVzdGlub3MuYXBwZW5kKChkZXN0X2NoYXRfaWQsIG51ZXZvLm1lc3NhZ2VfaWQpKQogICAgICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICAgICAgcHJpbnQoZiJFcnJvciBhbCByZWNyZWFyIG1lbnNhamUgZW4ge2Rlc3RfY2hhdF9pZH0gLT4iLCBlKQoKICAgICMgTGltcGlhciBlbmxhY2VzIGFudGlndW9zCiAgICBmb3IgZGVzdF9jaGF0X2lkLCBkZXN0X21zZ19pZCBpbiBkZXN0aW5vczoKICAgICAgICBzZW50X2xpbmsucG9wKChkZXN0X2NoYXRfaWQsIGRlc3RfbXNnX2lkKSwgTm9uZSkKCiAgICAjIEFjdHVhbGl6YXIgZW5sYWNlcyBjb24gbG9zIG51ZXZvcyBJRHMKICAgIHNlbnRfbGlua1sob3JpZ2VuX2NoYXQsIGVkaXRlZC5tZXNzYWdlX2lkKV0gPSBuZXdfZGVzdGlub3MKICAgIGZvciBkZXN0X2NoYXRfaWQsIGRlc3RfbXNnX2lkIGluIG5ld19kZXN0aW5vczoKICAgICAgICBzZW50X2xpbmtbKGRlc3RfY2hhdF9pZCwgZGVzdF9tc2dfaWQpXSA9IG5ld19kZXN0aW5vcwoKIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KIyBVc3VhcmlvIGVkaXRhIHN1IG1lbnNhamUg4oaSIHJlZW52aWFyIGVkaXRhZG8gY29tbyBOVUVWTyBhIGxvcyBhZG1pbnMgKyByZWFjY2nDs24KIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KYXN5bmMgZGVmIGhhbmRsZV91c2VyX2VkaXQoZWRpdGVkLCBjb250ZXh0OiBDb250ZXh0VHlwZXMuREVGQVVMVF9UWVBFKToKICAgIHVzZXJfY2hhdF9pZCA9IGVkaXRlZC5jaGF0X2lkCiAgICB1c2VyX2lkID0gZWRpdGVkLmZyb21fdXNlci5pZAoKICAgICMg8J+SrCBSZWFjY2nDs24gdGVtcG9yYWwgKDJzKSBhbCBtZW5zYWplIGVkaXRhZG8gZGVsIHVzdWFyaW8KICAgIHRyeToKICAgICAgICBhd2FpdCBjb250ZXh0LmJvdC5fcG9zdCgKICAgICAgICAgICAgInNldE1lc3NhZ2VSZWFjdGlvbiIsCiAgICAgICAgICAgIGRhdGE9ewogICAgICAgICAgICAgICAgImNoYXRfaWQiOiB1c2VyX2NoYXRfaWQsCiAgICAgICAgICAgICAgICAibWVzc2FnZV9pZCI6IGVkaXRlZC5tZXNzYWdlX2lkLAogICAgICAgICAgICAgICAgInJlYWN0aW9uIjogW3sidHlwZSI6ICJlbW9qaSIsICJlbW9qaSI6ICLwn5GNIn1dCiAgICAgICAgICAgIH0KICAgICAgICApCiAgICAgICAgYXdhaXQgYXN5bmNpby5zbGVlcCgyKQogICAgICAgIGF3YWl0IGNvbnRleHQuYm90Ll9wb3N0KAogICAgICAgICAgICAic2V0TWVzc2FnZVJlYWN0aW9uIiwKICAgICAgICAgICAgZGF0YT17CiAgICAgICAgICAgICAgICAiY2hhdF9pZCI6IHVzZXJfY2hhdF9pZCwKICAgICAgICAgICAgICAgICJtZXNzYWdlX2lkIjogZWRpdGVkLm1lc3NhZ2VfaWQsCiAgICAgICAgICAgICAgICAicmVhY3Rpb24iOiBbXQogICAgICAgICAgICB9CiAgICAgICAgKQogICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgICAgIHByaW50KCJFcnJvciByZWFjY2nDs24gdGVtcG9yYWwgZWRpY2nDs24gdXN1YXJpbzoiLCBlKQoKICAgICMgUmVlbnZpYXIgZWwgbWVuc2FqZSBlZGl0YWRvIGNvbW8gbnVldm8gYSBjYWRhIGFkbWluCiAgICBmb3IgYWRtaW5fY2hhdF9pZCBpbiBBRE1JTl9JRFM6CiAgICAgICAgdHJ5OgogICAgICAgICAgICByZWVudmlhZG8gPSBhd2FpdCBjb250ZXh0LmJvdC5mb3J3YXJkX21lc3NhZ2UoCiAgICAgICAgICAgICAgICBjaGF0X2lkPWFkbWluX2NoYXRfaWQsCiAgICAgICAgICAgICAgICBmcm9tX2NoYXRfaWQ9dXNlcl9jaGF0X2lkLAogICAgICAgICAgICAgICAgbWVzc2FnZV9pZD1lZGl0ZWQubWVzc2FnZV9pZAogICAgICAgICAgICApCiAgICAgICAgICAgICMgR3VhcmRhciByZWxhY2nDs24gcGFyYSBxdWUgc2kgcmVzcG9uZGVuIGEgZXN0ZSBudWV2bywgdmF5YSBhbCBtaXNtbyB1c3VhcmlvCiAgICAgICAgICAgIGxpbmtbKGFkbWluX2NoYXRfaWQsIHJlZW52aWFkby5tZXNzYWdlX2lkKV0gPSB1c2VyX2lkCiAgICAgICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgICAgICAgICBwcmludChmIkVycm9yIGFsIHJlZW52aWFyIG1lbnNhamUgZWRpdGFkbyBhIGFkbWluIHthZG1pbl9jaGF0X2lkfSAtPiIsIGUpCgojIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQojIE1BSU4KIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KYXN5bmMgZGVmIG1haW4oKToKICAgIGFwcCA9IEFwcGxpY2F0aW9uLmJ1aWxkZXIoKS50b2tlbihUT0tFTikuYnVpbGQoKQoKICAgICMgQ29tYW5kbyAvc3RhcnQKICAgIGFwcC5hZGRfaGFuZGxlcihDb21tYW5kSGFuZGxlcigic3RhcnQiLCBzdGFydF9jbWQpKQoKICAgICMgTWVuc2FqZXMgbm9ybWFsZXMgKG5vIGVkaXRhZG9zKSwgdG9kb3MgbG9zIHRpcG9zIGV4Y2VwdG8gY29tYW5kb3MKICAgIGFwcC5hZGRfaGFuZGxlcigKICAgICAgICBNZXNzYWdlSGFuZGxlcigKICAgICAgICAgICAgZmlsdGVycy5BTEwgJiB+ZmlsdGVycy5DT01NQU5EICYgZmlsdGVycy5VcGRhdGVUeXBlLk1FU1NBR0UsCiAgICAgICAgICAgIGFkbWluX3Jlc3B1ZXN0YQogICAgICAgICkKICAgICkKCiAgICAjIFJlYWNjaW9uZXMgZGUgbG9zIGFkbWlucwogICAgYXBwLmFkZF9oYW5kbGVyKE1lc3NhZ2VSZWFjdGlvbkhhbmRsZXIoYWRtaW5fcmVhY2Npb24pKQoKICAgICMgRWRpY2lvbmVzIGRlIG1lbnNhamVzICh1c3VhcmlvcyB5IGFkbWlucykKICAgIGFwcC5hZGRfaGFuZGxlcigKICAgICAgICBNZXNzYWdlSGFuZGxlcigKICAgICAgICAgICAgZmlsdGVycy5VcGRhdGVUeXBlLkVESVRFRF9NRVNTQUdFLAogICAgICAgICAgICBoYW5kbGVfZWRpdAogICAgICAgICkKICAgICkKCiAgICBwcmludCgiQk9UIElOSUNJQURPLCBFU1BFUkFORE8gTUVOU0FKRVMuLi4iKQogICAgYXdhaXQgYXBwLmluaXRpYWxpemUoKQogICAgYXdhaXQgYXBwLnN0YXJ0KCkKICAgIGF3YWl0IGFwcC51cGRhdGVyLnN0YXJ0X3BvbGxpbmcoKQogICAgYXdhaXQgYXN5bmNpby5FdmVudCgpLndhaXQoKQoKYXN5bmNpby5ydW4obWFpbigpKQ==').decode('utf-8'))
